<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title> Dashboard</title>
  
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
 
  <link rel="stylesheet" href="..//assets/css/admin-page.css">
</head>
<body>
  <div class="wrapper">
   
    <div class="header">
      <h1>Dashboard Overview</h1>
      <div class="sub"></div>

      
      <div class="kpis">
        <div class="card"><h3>Total Cars Listed</h3><div class="big" id="kpi-listed">—</div></div>
        <div class="card"><h3>Cars Sold</h3><div class="big" id="kpi-sold">—</div></div>
        <div class="card"><h3>Cars Available</h3><div class="big" id="kpi-available">—</div></div>
      </div>

      
      <div class="quick">
        <div class="card stat">
          <h3>Daily Sales</h3><div class="value" id="daily-sales">$—</div>
        </div>
        <div class="card stat">
          <h3>Monthly Sales</h3><div class="value" id="monthly-sales">$—</div>
        </div>
      </div>
    </div>

   
    <div class="section-title">Most Viewed Cars</div>
    <div class="cars">
      <div class="car">
        <div class="img">Model X</div>
        <h4>Model X</h4><p>Brand A</p>
      </div>
      <div class="car">
        <div class="img">Model Y</div>
        <h4>Model Y</h4><p>Brand B</p>
      </div>
      <div class="car">
        <div class="img">Model Z</div>
        <h4>Model Z</h4><p>Brand C</p>
      </div>
    </div>

    
    <div class="card chart-card">
      <div class="chart-head">
        <div class="left">
          <h3 id="chart-total">$0</h3><span>This Month</span>
        </div>
        <div class="btns">
          <button id="btn-random">Randomize</button>
          <button id="btn-reset">Reset</button>
        </div>
      </div>
      <canvas id="salesChart" height="120"></canvas>
    </div>
  </div>

  <script>
    const baseData = [12000, 13500, 15000, 14000, 16000, 15500, 14800, 17000, 16500, 18000, 17500, 19500];
    const months   = ["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];

    const fmt = n => "$" + n.toLocaleString("en-US");
    const sum = arr => arr.reduce((a,b)=>a+b,0);

    function updateKPIs(){
      const listed = 250;
      const sold   = 120;
      const available = listed - Math.min(sold, listed);
      document.getElementById("kpi-listed").textContent = listed;
      document.getElementById("kpi-sold").textContent = sold;
      document.getElementById("kpi-available").textContent = available;

      const todaySales = Math.round((Math.random()*2500)+3500);
      document.getElementById("daily-sales").textContent = fmt(todaySales);
    }

    let chart, data = [...baseData];
    function buildChart(){
      const ctx = document.getElementById("salesChart");
      chart = new Chart(ctx, {
        type: "line",
        data: {
          labels: months,
          datasets: [{
            label: "Sales",
            data,
            tension: 0.35,
            fill: false
          }]
        },
        options: {
          responsive: true,
          plugins: { legend: { display:false }, tooltip: { mode:"index", intersect:false }},
          interaction: { mode:"nearest", intersect:false },
          scales: {
            x: { grid:{ color:"rgba(255,255,255,.05)"}},
            y: { grid:{ color:"rgba(255,255,255,.06)"}, ticks:{ callback:v=>"$"+v/1000+"k"}}
          }
        }
      });
      updateTotals();
    }

    function updateTotals(){
      const monthlyTotal = sum(data);
      document.getElementById("monthly-sales").textContent = fmt(monthlyTotal);
      document.getElementById("chart-total").textContent   = fmt(monthlyTotal);
    }